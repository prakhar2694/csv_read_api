<!DOCTYPE html>
<html lang="en">
  <head>

    <!-- Declared Vars To Go Here -->

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Metadata -->
    <meta name="description" content="">
    <meta name="author" content="">

    <link rel="icon" href="mysource_files/favicon.ico">

    <!-- Page Name and Site Name -->
    <title>Page Name - Squiz Matrix HTML Example</title>

    <!-- CSS -->
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<!-- Optional theme -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

<!-- Latest compiled and minified JavaScript -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

   <style>
    .styled-table {
    border-collapse: collapse;
    margin: 25px 0;
    font-size: 0.9em;
    font-family: sans-serif;
    min-width: 400px;
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);
}

.styled-table thead tr {
    background-color: #337ab7;
    color: #ffffff;
    text-align: left;
}

.styled-table th,
.styled-table td {
    padding: 12px 15px;
}

.styled-table tbody tr {
    border-bottom: 1px solid #dddddd;
}

.styled-table tbody tr:nth-of-type(even) {
    background-color: #f3f3f3;
}

.styled-table tbody tr:last-of-type {
    border-bottom: 2px solid #337ab7;
}

.styled-table tbody tr.active-row {
    font-weight: bold;
    color: #337ab7;
}
   </style> 
	<script>
	
		$(document).ready(function (){
     // debugger;
			$.ajax({
				url:"http://127.0.0.1:5000/foods",
				type: "GET",
				success: function (result){
					console.log(result);
          $('#result').empty();
          for (var li in result) {
           $('#result').append(`<li><a href="#" data-value=${encodeURI(result[li])} onclick="dropdownAction(this)">${result[li]}</a></li>`)
           //console.log("Clicked")
          }
				},
				error: function (error) {
					console.log(error);
				}
			});
			
		})

    function dropdownAction(btn){
        let value = decodeURI($(btn).data('value'));
        $('#selected').text(value);
        console.log("Clicked",value)

        var myTableBody = $('#my-table-id tbody');
        $.ajax({
				url:`http://127.0.0.1:4000/contents?item=${value}`,
				type: "GET",
				success: function (content){
					console.log(content);
          $('#content').empty();
          console.log("content",content.carbohydrate)
          var tableRow = `
          <tr>
                            <td>
                              Carbohydrate
                            </td>
                            <td>
                              Protien
                            </td>
                            <td>
                              Fiber
                            </td>
                            <td>
                              Saturated Fat
                            </td>
                            <td>
                              Sugar
                            </td>
                            <td>
                              Water
                            </td>
                           </tr>
          <tr>
                            <td>
                              ${content.carbohydrate}
                            </td>
                            <td>
                              ${content.protien}
                            </td>
                            <td>
                              ${content.fiber}
                            </td>
                            <td>
                              ${content.saturated_fat}
                            </td>
                            <td>
                              ${content.sugar}
                            </td>
                            <td>
                              ${content.water}
                            </td>
                           </tr>`

           myTableBody
             .append(tableRow);

				},
				error: function (error) {
					console.log(error);
				}
			});
     }
	
	</script>
  </head>

  <body>

    <div class="container">

      <header class="header clearfix" style="background-color: #ffffff">

        <!-- Main Menu -->
        <nav>
          <ul class="nav nav-pills pull-right">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#">About</a></li>
            <li><a href="#">Contact</a></li>
          </ul>
        </nav>

        <!-- Site Name -->
        <h1 class="h3 text-muted">AtheleticU.com</h1>

        <!-- Breadcrumbs -->
        <ol class="breadcrumb">
        </ol>

      </header>

      <div class="page-heading">

        <!-- Page Heading -->
        <h1 align='center'>Food Calculator</h1>

      </div>

      <div class="row">

        <div class="col-sm-3">

          <!-- Sub Navigation -->

        </div>

        <div class="col-sm-6">

          <div class="page-contents">

            <!-- Design Body -->
            <div class="row">
              <h6 style="margin-right: 5px;">Food Items</h6>
              
              <div class="dropdown">
                <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                  <span id="selected">Select Here</span>
                  <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenu1" id="result">
                  <li><a href="#" data-value="Beef" onclick="dropdownAction(this)">Beef</a></li>
                  <li><a href="#" data-value="Another action" onclick="dropdownAction(this)">Another action</a></li>
                  <li><a href="#" data-value="Something else here" onclick="dropdownAction(this)">Something else here</a></li>
                  
                </ul>
                
              </div>
              <table id="my-table-id" class="styled-table" ><tbody></tbody></table>
            </div>
            <!-- Design body -->

          </div>

        </div>

      </div>

      <footer class="footer">
        <p class="pull-right">
          <!-- Last Updated Design Area-->
          Last Updated: Wednesday, March, 2016
        </p>
        <p>&copy; 2022 Company, Inc.</p>
      </footer>

    </div> <!-- /container -->

  </body>
</html>